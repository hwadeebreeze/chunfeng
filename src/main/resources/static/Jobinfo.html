<!DOCTYPE html>
<html>
<head>
	<title>招聘详情</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta http-equiv="Content-Type" content="charset=utf-8" />
	<!-- Bootstrap CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<!-- Filter CSS -->
	<link href="css/filter.css" rel="stylesheet">
	<!-- Header CSS -->
	<link href="css/header.css" rel="stylesheet">
	<!-- Jobinfo CSS -->
	<link href="css/jobinfo.css" rel="stylesheet">
	<!-- Footer CSS -->
	<link href="css/footer.css" rel="stylesheet">
	<!-- Style CSS -->
	<link href="css/style.css" rel="stylesheet">

	<script src="js/jquery-1.12.0.min.js"></script>

	<script type="text/javascript">
		var jobInfo;
		var companyInfo;

		
		$(document).ready(function() {
			jobInfo = getJobInfo();
			companyInfo = getCompanyInfo();
			console.log(jobInfo);
			console.log(companyInfo);

			document.getElementById("job_title").innerText = jobInfo.title;
			document.getElementById("salary_least").innerText = jobInfo.salaryLeast;
			document.getElementById("salary_most").innerText = jobInfo.salaryMost;
			document.getElementById("company_name").innerText = companyInfo.name;
			document.getElementById("work_city").innerText = jobInfo.city;
			document.getElementById("age_least").innerText = jobInfo.ageLeast;
			document.getElementById("age_most").innerText = jobInfo.ageMost;
			$.ajax({
                type: "post",
				async : false,
                url: "/educationName?educationId=" + jobInfo.education,
                success: function (data) {
                    document.getElementById("education").innerText = data;
                }
            });

			document.getElementById("content").innerHTML = jobInfo.content + "<br>test";

			document.getElementById("company_name").innerText = companyInfo.name;
			document.getElementById("company_size").innerText = companyInfo.size;
			document.getElementById("location").innerText = companyInfo.address;
			document.getElementById("company_info").innerText = companyInfo.info;

			load_label();
		});
		function getJobInfo(){
			var jobId = window.location.href.split("#")[1];
			var result;
			$.ajax({
                type: "get",
				async : false,
                url: "/jobInfo?jobId=" + jobId,
                success: function (data) {
                    
					result = data;
                }
            });
			return result;
		}

		function getCompanyInfo(){
			var jobId = window.location.href.split("#")[1];
			var result;
			$.ajax({
                type: "get",
				async : false,
                url: "/companyInfo?jobId=" + jobId,
                success: function (data) {
                   
					result = data;
                }
            });
			return result;
		}
		
		function load_label(){
			var skill=jobInfo.capacity.split(",");
			var wal=jobInfo.welfare.split(",");
			var indus=companyInfo.industry.split(",");
			
			console.log(jobInfo[2]);

			var skill_container = document.getElementById("skill_la");
			var wal_container = document.getElementById("wel_la");
			var indus_container = document.getElementById("indus_la");
			for( var i = 0; i < skill.length ; i++){
			var new_span = document.createElement('span');
			new_span.innerText=skill[i];
			skill_container.appendChild(new_span);
			}
			for( var i = 0; i < wal.length ; i++){
			var new_span = document.createElement('span');
			new_span.innerText=wal[i];
			wal_container.appendChild(new_span);
			}
			for( var i = 0; i < indus.length ; i++){
			var new_span = document.createElement('span');
			new_span.innerText=indus[i];
			indus_container.appendChild(new_span);
			}
		}
	</script>

</head>

<body>
<!-- <header class="header">
	<nav class="navbar navbar-default navbar-fixed-top box-shadow-10">
		<div class="collapse navbar-collapse container top_head">
			<ul class="nav navbar-nav navbar-right">
				<li class="welcome">欢迎</li>
				<li><a id="register" data-scroll-nav="0" href="#">注销</a></li>
				<li><a id="login" data-scroll-nav="1" href="#">登陆</a></li>
				<li><a id="register" data-scroll-nav="2" href="#">注册</a></li>
			</ul>				
		</div>
	</nav>
</header> -->

<div id="_report">
	<div id="report_close" class="glyphicon glyphicon-remove" style="display:none">
	</div>
	<br/>
	<div id="report_container">
		<div class="graph_cont">
		</div>
		<div class="graph_cont">
		</div>
	</div>
</div>

<div class="jobinfo_cont container">
	<div class="job_title">
		<a id="job_title">标题</a>
	</div>
	<div class="jobinfo">
		<table>
		<tr>
			<td id="salary">薪资：<span id="salary_least">薪资下限</span> ~ <span id="salary_most">薪资上限</span></td>
			<td>公司名称：<span id="company_name">公司名称信息</span></td>
			<td>工作地点：<span id="work_city">工作地点信息</span></td>
		</tr>
		<tr>
			<td>年龄限制：<span id="age_least">最低年龄</span> ~ <span id="age_most">最高年龄</span></td>
			<td>学历：<span id="education">学历要求</span> </td>
		</tr>
		</table>
		<div id="skill">
			<label id="skill_la">技能要求：
			</label>
		</div>
		<div id="wel">
			<label id="wel_la">工作福利：
			</label>
		</div>
		<button id="report" class="jobinfo_btn">我要匹配</button>
		<button  class="jobinfo_btn" onclick="load_label()">投递简历</button>
	</div>
	
	<div class="jobdetail">
		<label class="jobdetail_label">招聘详情</label>
		<p id="content">
		由上海地纬(集团)股份有限公司重磅打造的复合型商业旗舰广场『地纬生活广场』项目招商现场火爆，客户持币踊跃待租，万众期待的财富核爆席卷川沙。地纬生活广场集餐饮、娱乐、休闲、购物、健身、早教六大高端功能于一体。铂金地标、便捷交通、一流配置、超强人气，全力构筑浦东高端商业带，引领川沙商业区崛起。　　
		</p>
	</div>
	<div class="companydetail">
		<label class="companydetail_label">公司详情</label>
		<table>
		<tr>
			<td>公司名称：<span id="company_name">公司名称</span></td>
			<td>公司规模：<span id="company_size">公司规模</span></td>
		</tr>
		</table>
		<div id="loc">
			<label >公司地址：
			<span id="location">公司地址信息</span>
			</label>
		</div>
		<div id="indus">
			<label id="indus_la">公司行业：
			</label>
		</div>
		<h3>公司简介：</h3>
		<p id="company_info">
		由上海地纬(集团)股份有限公司重磅打造的复合型商业旗舰广场『地纬生活广场』项目招商现场火爆，客户持币踊跃待租，万众期待的财富核爆席卷川沙。地纬生活广场集餐饮、娱乐、休闲、购物、健身、早教六大高端功能于一体。铂金地标、便捷交通、一流配置、超强人气，全力构筑浦东高端商业带，引领川沙商业区崛起。　　
		</p>
	</div>
</div>
<footer class="footer">
	<div class="container">
		<!-- Col Start -->
		<div class="copy-right">
			<p>Copyright &copy; 2018.Company name All rights reserved.</p>
		</div>
		<!-- Col End -->
	</div>
</footer>

<!-- JQuery JS -->

<!-- Bootstrap JS -->
<script src="js/bootstrap.min.js"></script>
<!-- Filter JS -->
<script src="js/filter.js"></script>
<!-- Login JS -->
<script src="js/page_add.js"></script>	
<!-- Jobinfo JS -->
<script src="js/Jobinfo.js"></script>
</body>
</html>